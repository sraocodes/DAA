{{ define "main" }}

<!-- Single Page Container -->
<div id="single-{{ .Title | urlize }}" class="single-container">

  <!-- Page Navigation -->
  <nav id="single-nav" class="navbar">
    <ul>
      {{ range .Params.sections }}
      <li>
        {{ if .url }}
        <a href="{{ .url }}" target="_blank" rel="noopener noreferrer" class="external">{{ .name }}</a>
        {{ else }}
        <a href="#single-{{ .name | urlize }}">{{ .name }}</a>
        {{ end }}
      </li>
      {{ end }}
    </ul>
  </nav>

  <!-- Page Sections -->
  {{ range .Params.sections }}
  {{ if not .url }}
  <section id="single-{{ .name | urlize }}" class="content-section">
    <h2>{{ .name }}</h2>
    <div class="section-content {{ if or (eq .textPosition "right") (not .textPosition) }}text-right{{ else }}text-left{{ end }}">
      <div class="text-content">
        <p>{{ .text | markdownify | replaceRE `(<a href="[^"]*")` `$1 target="_blank"` | safeHTML }}</p>
        {{ if .list }}
        <div class="list-content">
          <ul>
            {{ range .list }}
            <li>{{ . | markdownify | safeHTML }}</li>
            {{ end }}
          </ul>
        </div>
        {{ end }}
      </div>
      {{ if .image }}
      <div class="img-content">
        <img src="{{ .image | relURL }}" alt="{{ .name }}" style="width: {{ .imageWidth }}; height: {{ .imageHeight }};">
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}
  {{ end }}

  <!-- Back to Top Button -->
  <button id="backToTopBtn" title="Back to Top">&#10148;</button>
</div>

{{ end }}

{{ define "scripts" }}
{{ $singleJs := resources.Get "js/single.js" }}
<script src="{{ $singleJs.Permalink }}"></script>
{{ end }}
