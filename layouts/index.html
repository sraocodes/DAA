{{ define "main" }}

<div class="card-container">
    {{ range .Params.slides }}
    <div class="card">
        <img src="{{ .image | relURL }}" alt="Slide image" class="card-img">
        <div class="card-content">
            <h2>{{ .heading }}</h2>
            {{ $text := .text }}
            {{ range $key, $value := . }}
                {{ if (strings.HasSuffix $key "_link") }}
                    {{ if not (strings.HasPrefix $value "http") }}
                        {{ $value = printf "%s%s" $.Site.BaseURL $value }}
                    {{ end }}
                    {{ $linkText := (replace $key "_link" "") | upper }}
                    {{ $text = replace $text $linkText (print "<a href=\"" $value "\">" $linkText "</a>") }}
                {{ end }}
            {{ end }}
            <p>{{ $text | safeHTML }}</p>
            {{ $link := .link }}
            {{ if not (strings.HasPrefix $link "http") }}
                {{ $link = printf "%s%s" $.Site.BaseURL $link }}
            {{ end }}
            <a href="{{ $link }}" class="learn-more">Learn more</a>
        </div>
    </div>
    {{ end }}
</div>

{{ end }}
